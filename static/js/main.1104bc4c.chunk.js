(this["webpackJsonpblog-stalker"]=this["webpackJsonpblog-stalker"]||[]).push([[0],{41:function(e,t,n){e.exports=n(70)},70:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),u=n(11),s=n.n(u),o=n(6),i=n(39),l=n(7),p=n(2),d=n.n(p),m=n(3),f=n(4),b=n(5),v=n(10),h=n.n(v),x="https://gorest.co.in/public-api",O="9sCYGNbLpzt_pSzDk3InomgvIe26LGsEb2J3",j={_format:"json","access-token":O};function y(){return g.apply(this,arguments)}function g(){return(g=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h()(x+"/users",{params:Object(b.a)({},j)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h()(x+"/users/"+t,{method:"PATCH",headers:{Authorization:"Bearer "+O},data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.addUsersSuccess=0]="addUsersSuccess",e[e.addUsersStarted=1]="addUsersStarted",e[e.addUsersFailed=2]="addUsersFailed",e[e.selectActiveUser=3]="selectActiveUser",e[e.updateActiveUser=4]="updateActiveUser"}(a||(a={}));var k={users:[],activeUser:null,isLoading:!1},S=Object(r.createContext)({state:k,dispatch:function(){return null}});function U(e,t){switch(t.type){case a.addUsersStarted:return Object(b.a)({},e,{isLoading:!0});case a.addUsersFailed:return Object(b.a)({},e,{isLoading:!1,error:t.payload});case a.addUsersSuccess:return Object(b.a)({},e,{isLoading:!1,users:t.payload});case a.selectActiveUser:return Object(b.a)({},e,{activeUser:t.payload});case a.updateActiveUser:return Object(b.a)({},e,{activeUser:t.payload,users:e.users.map((function(e){return e.id===t.payload.id?t.payload:e}))});default:return e}}var _=function(e){var t=e.children,n=Object(r.useReducer)(U,k),u=Object(f.a)(n,2),s=u[0],o=u[1];return Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o({type:a.addUsersStarted}),e.next=4,y();case 4:t=e.sent,o({type:a.addUsersSuccess,payload:t.data.result}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o({type:a.addUsersFailed,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.a.createElement(S.Provider,{value:{state:s,dispatch:o}},t)};function C(){var e=Object(o.a)(["\n  padding: 40px;\n  margin-bottom: 20px;\n  box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.3);\n"]);return C=function(){return e},e}var A=l.a.div(C()),L=function(){var e=Object(r.useContext)(S),t=e.state,n=e.dispatch,u=t.activeUser?{first_name:t.activeUser.first_name,last_name:t.activeUser.last_name,id:t.activeUser.id}:null;return c.a.createElement(A,null,c.a.createElement("h1",null,"Select user"),c.a.createElement(i.a,{value:u,onChange:function(e){return function(e){e&&n({type:a.selectActiveUser,payload:e})}(e)},getOptionLabel:function(e){return e.first_name+" "+e.last_name},getOptionValue:function(e){return e.id},options:t.users}))},I=n(40);function q(e){return z.apply(this,arguments)}function z(){return(z=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h()(x+"/comments",{method:"GET",params:Object(b.a)({},j,{post_id:t})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return B.apply(this,arguments)}function B(){return(B=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h()(x+"/comments",{method:"POST",headers:{Authorization:"Bearer "+O},data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){var e=Object(o.a)(["\n  max-width: 400px;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid #999;\n  }\n"]);return Y=function(){return e},e}var D=l.a.div(Y()),G=function(e){var t=e.comment;return c.a.createElement(D,null,c.a.createElement("h4",null,t.name),c.a.createElement("p",null,t.body))};var J=function(e){var t=e.comments;return c.a.createElement("div",null,t.map((function(e){return c.a.createElement(G,{key:e.id,comment:e})})))},P=n(13);function T(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n\n  input,\n  textarea {\n    margin-bottom: 10px;\n    padding: 20px;\n  }\n"]);return T=function(){return e},e}var W=l.a.form(T());var H=function(e){var t=e.postId,n=e.onSubmit,a=Object(r.useState)({name:"",email:"",body:"",post_id:t}),u=Object(f.a)(a,2),s=u[0],o=u[1],i=Object(r.useState)(!1),l=Object(f.a)(i,2),p=l[0],v=l[1];function h(){o((function(e){return Object(b.a)({},e,{name:"",email:"",body:""})}))}function x(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(b.a)({},e,Object(P.a)({},n,a))}))}function O(){return(O=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,v(!0),e.next=5,F(s);case 5:a=e.sent,n(a.data.result),h(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:v(!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return c.a.createElement(W,{onSubmit:function(e){return O.apply(this,arguments)}},c.a.createElement("input",{onChange:x,value:s.name,type:"name",name:"name",required:!0,placeholder:"Your name"}),c.a.createElement("input",{onChange:x,value:s.email,type:"email",name:"email",required:!0,placeholder:"Your email"}),c.a.createElement("textarea",{onChange:x,value:s.body,placeholder:"Your comment",name:"body",required:!0}),c.a.createElement("button",{type:"submit"},p?"Submitting":"Submit"))};function N(){var e=Object(o.a)(["\n  padding: 40px;\n  margin-bottom: 20px;\n  box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.3);\n"]);return N=function(){return e},e}var R=l.a.div(N()),V=function(e){var t=e.postId,n=Object(r.useState)([]),a=Object(f.a)(n,2),u=a[0],s=a[1],o=Object(r.useState)(!1),i=Object(f.a)(o,2),l=i[0],p=i[1];return Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,q(t);case 4:if(200!==(n=e.sent).data._meta.code){e.next=9;break}s(n.data.result),e.next=10;break;case 9:throw new Error(n.data._meta.message);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:p(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),c.a.createElement(R,null,l?"Loading...":c.a.createElement(J,{comments:u}),c.a.createElement(H,{onSubmit:function(e){s([].concat(Object(I.a)(u),[e]))},postId:t}))};function $(){var e=Object(o.a)(["\n  border-bottom: 1px solid #999;\n"]);return $=function(){return e},e}var K=l.a.div($()),M=function(e){var t=e.post,n=Object(r.useState)(!1),a=Object(f.a)(n,2),u=a[0],s=a[1];return c.a.createElement(K,null,c.a.createElement("h3",null,t.title),c.a.createElement("p",null,t.body),!u&&c.a.createElement("p",{onClick:function(){s(!0)}},"Show comments"),u&&c.a.createElement(V,{postId:t.id}))};function Q(){var e=Object(o.a)(["\n  padding: 40px;\n  margin-bottom: 20px;\n  box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.3);\n"]);return Q=function(){return e},e}var X=l.a.div(Q()),Z=function(e){var t=e.posts,n=Object(r.useState)(!0),a=Object(f.a)(n,2),u=a[0],s=a[1];if(!t.length)return null;var o=u?[t[0]]:t;return c.a.createElement(X,null,o.map((function(e){return c.a.createElement(M,{key:e.id,post:e})})),t.length>1&&u&&c.a.createElement("h3",{onClick:function(){return s(!1)}},"show more posts!"))};function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h()(x+"/posts",{params:Object(b.a)({},j,{user_id:t})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=n(38),ae=n.n(ne);function re(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  z-index: 999;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(#fff, 0.6);\n"]);return re=function(){return e},e}var ce=l.a.div(re()),ue=function(){return c.a.createElement(ce,null,c.a.createElement(ae.a,null))};var se=function(){var e=Object(r.useContext)(S).state.activeUser,t=Object(r.useState)([]),n=Object(f.a)(t,2),a=n[0],u=n[1],s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],l=o[1];return Object(r.useEffect)((function(){function t(){return(t=Object(m.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e||void 0===e?void 0:e.id)){t.next=17;break}return t.prev=1,l(!0),t.next=5,ee(e.id);case 5:if(200!==(n=t.sent).data._meta.code){t.next=10;break}u(n.data.result),t.next=11;break;case 10:throw new Error(n.data._meta.message);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),alert(t.t0);case 16:l(!1);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[null===e||void 0===e?void 0:e.id]),i?c.a.createElement(ue,null):c.a.createElement(Z,{posts:a})};function oe(){var e=Object(o.a)(["\n  padding: 40px;\n  margin-bottom: 20px;\n  box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.3);\n"]);return oe=function(){return e},e}var ie=l.a.div(oe()),le=function(){var e=Object(r.useContext)(S),t=e.state.activeUser,n=e.dispatch,u=Object(r.useState)({first_name:"",last_name:""}),s=Object(f.a)(u,2),o=s[0],i=s[1],l=Object(r.useState)(!1),p=Object(f.a)(l,2),v=p[0],h=p[1];function x(){i({first_name:"",last_name:""})}function O(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(b.a)({},e,Object(P.a)({},n,a))}))}function j(){return(j=Object(m.a)(d.a.mark((function e(r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!t){e.next=19;break}return e.prev=2,h(!0),e.next=6,E(t.id,o);case 6:if(200!==(c=e.sent).data._meta.code){e.next=12;break}n({type:a.updateActiveUser,payload:c.data.result}),x(),e.next=13;break;case 12:throw new Error(c.data._meta.message);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),alert(e.t0);case 18:h(!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}return t?c.a.createElement(ie,null,c.a.createElement("h2",null,"Update user first name and last name"),c.a.createElement(W,{onSubmit:function(e){return j.apply(this,arguments)}},c.a.createElement("input",{type:"text",onChange:O,value:o.first_name,name:"first_name",placeholder:"user first name",required:!0}),c.a.createElement("input",{type:"text",onChange:O,value:o.last_name,name:"last_name",placeholder:"user last name",required:!0}),c.a.createElement("button",{type:"submit"},v?"Submitting":"Submit"))):null};var pe=function(){return Object(r.useContext)(S).state.isLoading?c.a.createElement(ue,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(L,null),c.a.createElement(le,null),c.a.createElement(se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(_,null,c.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.1104bc4c.chunk.js.map